# 更新日志

所有重要的项目更改都将记录在此文件中。

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
版本号遵循 [语义化版本](https://semver.org/lang/zh-CN/)。

## [2.3.1] - 2025-12-15

### 新增

- 新增11种风格选择（小红书爆款、海报2K、INS极简、科技未来、自然清新、多巴胺、莫兰迪、黑金、极简白、赛博朋克、复古怀旧）
- 新增风格示例展示区域，每个风格配有俏皮的一句话描述
- 新增风格提示词完整管理系统，支持用户自定义每个风格的详细提示词

### 改进

- **重大优化**：修复用户风格选择未注入到图片生成的问题，确保用户选择的风格优先应用
- **重大优化**：实现同一帖子内所有页面风格完全一致，封面页和内容页使用相同的用户选择风格
- 优化版本号显示机制，从package.json动态读取，不再硬编码
- 优化历史记录存储策略，使用带压缩功能的存储服务，解决localStorage配额超限问题
- 优化图片压缩逻辑，对TEXT_TO_IMAGE模式的所有页面图片进行压缩（600px，0.6质量）
- 优化存储空间管理，当存储空间不足时自动删除最旧记录并进一步压缩图片
- 优化完成提示模态框，确保项目名称与当前主题一致
- 优化风格一致性提示词，明确要求所有页面使用相同的用户选择风格
- 优化代码结构，将AI服务模块化，统一导出接口

### 修复

- 修复生图完成后未触发通知和一键下载的问题
- 修复图片生成时出现P1、P2等页码标题的问题，明确禁止任何页码标识
- 修复CompletionModal标题显示问题，确保使用当前主题而不是上一个记录的主题
- 修复localStorage配额超限错误（QuotaExceededError），改用带压缩功能的存储服务
- 修复风格选择未传递到图片生成的问题，所有调用点都正确传递style参数
- 修复代码中多处TypeScript类型错误和linter警告
- 清理调试日志，移除所有instrumentation代码

## [2.2.0] - 2025-01-XX

### 新增

- 新增提示词生成图片模式，支持批量生成
- 新增风格提示词管理系统，支持自定义每个风格的详细提示词
- 新增风格选择功能（小红书爆款、海报风格、INS极简、科技未来、自然清新）
- 新增图片数量选择功能，可控制生成图片数量（6-12张）

### 改进

- 优化风格传递机制，风格作为元数据传递而非文本内容
- 优化大纲生成逻辑，严格按照用户指定的图片数量生成
- 优化图片生成提示词，使用详细的风格提示词模板
- 优化历史记录存储策略，对所有模式图片进行压缩以节省存储空间
- 改进localStorage存储错误处理，更积极地清理旧数据
- 优化API Key输入体验，采用卡片式输入设计

### 修复

- 修复生成大纲时自动多生成一张的问题
- 修复风格提示词未传递给图片生成工具的问题
- 修复localStorage存储空间不足的错误
- 修复提示词生图历史记录详情显示错误的问题
- 修复API Key输入第一次失败的问题

## [2.1.0] - 2025-01-XX

### 新增

- 添加下载完整文字内容功能（Markdown格式）
- 增强一键下载功能，支持分别下载图片和文字内容
- 优化历史记录保存逻辑，确保文生图完成后正确保存

### 改进

- 优化历史记录保存机制，增加容错处理和自动用户创建
- 改进结果页面，添加独立的文字内容下载按钮
- 增强下载功能，支持自定义文件名（基于项目名称）

### 修复

- 修复文生图完成后历史记录未保存的问题
- 修复结果页面缺少文字内容下载功能的问题
- 修复历史记录保存失败时的错误处理

## [2.0.0] - 2025-01-XX

### 新增

- 整合文本生成图文与图生图两种创作模式
- 支持文本生成图文模式
- 支持图生图模式
- 统一UI组件库
- Docker部署支持（Nginx和Node.js两种方式）
- 历史记录功能
- 系统设置界面
- 单元测试框架

### 改进

- 优化UI视觉设计
- 完善组件库（Button、Card、Input、Modal、Toast、Progress等）
- 增强错误处理
- 优化API调用逻辑
- 改进响应式布局

### 修复

- 修复API调用重复问题
- 修复历史记录保存问题
- 修复图片生成显示问题
- 修复超时处理问题

## [1.0.0] - 2024-XX-XX

### 新增

- 初始版本发布
- 基础功能实现

